<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.551">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Editar con PyMARC</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="css/output.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">PyMARC en Español</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-taller-introductorio-pymarc" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Taller Introductorio PyMARC</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-taller-introductorio-pymarc">    
        <li>
    <a class="dropdown-item" href="./01_introduccion.html">
 <span class="dropdown-text">Introducción y Configuración</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./02_introduccion_python.html">
 <span class="dropdown-text">Python 101</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./03_introduccion_pymarc.html">
 <span class="dropdown-text">Introducción a PyMarc</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./04_introduccion_pymarc2.html">
 <span class="dropdown-text">Búsqueda con PyMARC</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./05_introduccion_pymarc3.html">
 <span class="dropdown-text">Editar con PyMARC</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./06_introduccion_pymarc4.html">
 <span class="dropdown-text">Guardar archivos MARC</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#copiando-registros-para-editar" id="toc-copiando-registros-para-editar" class="nav-link active" data-scroll-target="#copiando-registros-para-editar">Copiando registros para editar</a></li>
  <li><a href="#editar-información-existente-en-un-registro" id="toc-editar-información-existente-en-un-registro" class="nav-link" data-scroll-target="#editar-información-existente-en-un-registro">Editar información existente en un registro</a></li>
  <li><a href="#eliminando-campos-de-un-registro" id="toc-eliminando-campos-de-un-registro" class="nav-link" data-scroll-target="#eliminando-campos-de-un-registro">Eliminando campos de un registro</a></li>
  <li><a href="#eliminando-subcampos-específicos" id="toc-eliminando-subcampos-específicos" class="nav-link" data-scroll-target="#eliminando-subcampos-específicos">Eliminando subcampos específicos</a></li>
  <li><a href="#añadiendo-un-nuevo-campo-a-un-registro" id="toc-añadiendo-un-nuevo-campo-a-un-registro" class="nav-link" data-scroll-target="#añadiendo-un-nuevo-campo-a-un-registro">Añadiendo un nuevo campo a un registro</a></li>
  <li><a href="#validación" id="toc-validación" class="nav-link" data-scroll-target="#validación">Validación</a></li>
  <li><a href="#crear-un-registro-nuevo-desde-cero" id="toc-crear-un-registro-nuevo-desde-cero" class="nav-link" data-scroll-target="#crear-un-registro-nuevo-desde-cero">Crear un registro nuevo desde cero</a></li>
  <li><a href="#importa-el-orden-de-los-campos" id="toc-importa-el-orden-de-los-campos" class="nav-link" data-scroll-target="#importa-el-orden-de-los-campos">¿Importa el orden de los campos?</a></li>
  <li><a href="#recursos" id="toc-recursos" class="nav-link" data-scroll-target="#recursos">Recursos</a></li>
  <li><a href="#otros-ejemplos" id="toc-otros-ejemplos" class="nav-link" data-scroll-target="#otros-ejemplos">Otros ejemplos</a>
  <ul class="collapse">
  <li><a href="#consecuencias-no-deseadas" id="toc-consecuencias-no-deseadas" class="nav-link" data-scroll-target="#consecuencias-no-deseadas">Consecuencias no deseadas</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Editar con PyMARC</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<ul>
<li>Download marc files</li>
<li>Enlace al google colab (python Basics, PyMarc Basics)</li>
</ul>
<section id="copiando-registros-para-editar" class="level2">
<h2 class="anchored" data-anchor-id="copiando-registros-para-editar">Copiando registros para editar</h2>
<p>Cuando queremos modificar un registro, lo más seguro es <strong>copiarlo</strong> antes de editarlo. Esto evita que cambiemos el registro original.</p>
<p>Para asegurarnos de que estamos creando un nuevo registro que podamos modificar sin afectar el registro original, podemos usar el método de Python <code>deepcopy()</code> para resolver este problema:</p>
<div id="ea15cf05" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pymarc <span class="im">import</span> MARCReader</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>my_marc_file <span class="op">=</span> <span class="st">"data/edited_69x_subject.mrc"</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(my_marc_file, <span class="st">'rb'</span>) <span class="im">as</span> data:</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    reader <span class="op">=</span> MARCReader(data)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> record <span class="kw">in</span> reader:</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Sin deepcopy es el mismo objecto</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>        my_record <span class="op">=</span> record</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>        my_record[<span class="st">"245"</span>][<span class="st">"a"</span>] <span class="op">=</span> <span class="st">"Mi Nuevo Título"</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span> (record[<span class="st">"245"</span>])</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span> (my_record[<span class="st">"245"</span>])</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>=245  10$aMi Nuevo Título$f1977-2014 (inclusive).
=245  10$aMi Nuevo Título$f1977-2014 (inclusive).</code></pre>
</div>
</div>
<div id="c5fe485c" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pymarc <span class="im">import</span> MARCReader</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> copy <span class="im">import</span> deepcopy</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>my_marc_file <span class="op">=</span> <span class="st">"data/edited_69x_subject.mrc"</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(my_marc_file, <span class="st">'rb'</span>) <span class="im">as</span> data:</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    reader <span class="op">=</span> MARCReader(data)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> record <span class="kw">in</span> reader:</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Usando deepcopy es un registro separado</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>        my_record <span class="op">=</span> deepcopy(record)</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>        my_record[<span class="st">"245"</span>][<span class="st">"a"</span>] <span class="op">=</span> <span class="st">"Mi Nuevo Título"</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span> (record[<span class="st">"245"</span>])</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span> (my_record[<span class="st">"245"</span>])</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>=245  10$aUpdated Title$f1977-2014 (inclusive).
=245  10$aMi Nuevo Título$f1977-2014 (inclusive).</code></pre>
</div>
</div>
</section>
<section id="editar-información-existente-en-un-registro" class="level2">
<h2 class="anchored" data-anchor-id="editar-información-existente-en-un-registro">Editar información existente en un registro</h2>
<p>Veamos cómo podemos cambiar una pieza de información ya existente dentro de un registro.<br>
Actualmente, en nuestro registro podemos ver en el campo <code>100</code> una persona de nombre “Gray, Dorothy”</p>
<p>Como ejercicio, imaginemos que nos informan que en realidad no es el nombre indicado, sino que lo es su hermana gemela: Gray, Amber.</p>
<p>¡Necesitamos actualizar el registro para que sea correcto!</p>
<div id="f83452a2" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pymarc <span class="im">import</span> MARCReader</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> copy <span class="im">import</span> deepcopy</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>my_marc_file <span class="op">=</span> <span class="st">"data/edited_69x_subject.mrc"</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>old_name <span class="op">=</span> <span class="st">"Gray, Dorothy"</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>old_d <span class="op">=</span> <span class="st">"1922-1976"</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>new_name <span class="op">=</span> <span class="st">"Gray, Amber"</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>new_d <span class="op">=</span> <span class="st">"1922-1989"</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(my_marc_file, <span class="st">'rb'</span>) <span class="im">as</span> data:</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    reader <span class="op">=</span> MARCReader(data)</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> record <span class="kw">in</span> reader:</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">try</span>:</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> old_name <span class="kw">not</span> <span class="kw">in</span> record[<span class="st">"100"</span>][<span class="st">"a"</span>]:</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>                <span class="cf">continue</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">except</span> <span class="pp">KeyError</span>:</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>        my_record <span class="op">=</span> deepcopy(record)</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Solo necesitamos actualizar el subcampo 'a'.</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Nota la puntuación del catalogador... ¡tenemos que incluir la coma!</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> old_name <span class="kw">in</span> my_record[<span class="st">'100'</span>][<span class="st">'a'</span>]:</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>            my_record[<span class="st">'100'</span>][<span class="st">'a'</span>] <span class="op">=</span> new_name</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>            my_record[<span class="st">'100'</span>][<span class="st">'d'</span>] <span class="op">=</span> new_d</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Comparamos el registro original y el modificado</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(record[<span class="st">'100'</span>])</span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(my_record[<span class="st">'100'</span>])</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>=100  1\$aGray, Dorothy$d1922-1976
=100  1\$aGray, Amber$d1922-1989</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled" title="Ejercicio">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Ejercicio
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>¿Cómo cambiarías la fecha de nacimiento en el subcampo <code>d</code> a “1920-”?</p>
<div id="84192d6e" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>my_record[<span class="st">'100'</span>][<span class="st">'d'</span>] <span class="op">=</span> <span class="st">"1920-"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="eliminando-campos-de-un-registro" class="level2">
<h2 class="anchored" data-anchor-id="eliminando-campos-de-un-registro">Eliminando campos de un registro</h2>
<p>Supongamos que queremos eliminar el campo <code>300</code>:</p>
<div id="b520b258" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pymarc <span class="im">import</span> MARCReader</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> copy <span class="im">import</span> deepcopy</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>my_marc_file <span class="op">=</span> <span class="st">"data/edited_69x_subject.mrc"</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(my_marc_file, <span class="st">'rb'</span>) <span class="im">as</span> data:</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    reader <span class="op">=</span> MARCReader(data)</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> record <span class="kw">in</span> reader:</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>        my_record <span class="op">=</span> deepcopy(record)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> my_field <span class="kw">in</span> my_record.get_fields(<span class="st">'300'</span>):</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>            my_record.remove_field(my_field)</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(my_record)</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>=LDR  04800cpcaa2200505 a 4500
=001  12251425
=005  20240304103124.0
=008  140917i19772014ctu\\\\\\\\\\\\\\\\\eng\d
=035  \\$9(YUL)ead.mssa.ms.2000
=035  \\$a12251425
=040  \\$aCtY$beng$cCtY$edacs
=079  \\$a(OCoLC)1007214876
=090  \\$aMS 2000
=110  2\$aFamily Equality Council.$0http://id.loc.gov/authorities/names/no2012037822
=245  10$aUpdated Title$f1977-2014 (inclusive).
=351  \\$aThe materials are arranged according to document type.
=506  \\$aThe materials are open for research with the exception of the  electronic files, which are closed until processed.
=520  \\$aThis collection consists of the records of Family Equality Council, a national advocacy organization for esbian, gay, bisexual, transgender, and queer (LGBTQ) parents, guardians, and allies. Materials in the collection consist of correspondence, annual and quarterly reports, articles and clippings, board of directors records, event records, financial and fundraising records, publications, subject files, and electronic files. The collection is particularly strong both for its documentation of the group's activism and advocacy efforts, as well as its efforts to provide community for and document the everyday lives and experiences of LGBTQ families.
=524  \\$aFamily Equality Council Records (MS 2000).  Manuscripts and Archives, Yale University Library.
=540  \\$aCopyright is retained by the creator(s) of this collection for materials they have authored or otherwise produced. After the lifetime of the creator(s) or until January 1, 2039 (date), whichever comes first, copyright passes to Yale University whether such works are at Yale or physically located elsewhere in the world. Copyright status for other collection materials is unknown. Additional information is provided in the finding aid.
=544  \\$aRelated material: Rainbow Families records (MS 2006).
=545  \\$aFamily Equality Council is a national advocacy organization dedicated to securing equal rights for lesbian, gay, bisexual, transgender, and queer (LGBTQ) parents, guardians, and allies. Family Equality Council has its origins in the Gay Fathers Coalition, an organization founded in 1979. In 1986, the Gay Fathers Coalition expanded to include lesbian mothers, prompting the group to rename itself the Gay and Lesbian Parents Coalition International (GLPCI). In 1998, GLPCI changed its name to the Family Pride Coalition in order to include bisexual and transgender parents among its members and constituents. In that same year, a group of youth who had been involved with Family Pride Coalition established a separate advocacy organization for the children of LGBTQ parents, Children of Lesbians and Gays Everywhere (COLAGE). In 2007, the Family Pride Coalition merged with Rainbow Families, and in that same year renamed itself again as Family Equality Council. Later, the group dropped Council from its name, becoming Family Equality in 2018.
=546  \\$aThe materials are in English.
=555  \\$aThe finding aid is available in the repository and on the Internet.
=561  \\$aThe materials were the gift of Family Equality Council, 2014.
=610  20$aCOLAGE.$0http://id.loc.gov/authorities/names/no2008088417
=610  20$aFamily Equality Council.$0http://id.loc.gov/authorities/names/no2012037822
=610  20$aFamily Pride Coalition.
=610  20$aGay and Lesbian Parents Coalition International.$0http://id.loc.gov/authorities/names/nr2002025214
=610  20$aGay Fathers Coalition.
=610  20$aRainbow Families.
=650  \0$aAdoptive parents.$0http://id.loc.gov/authorities/subjects/sh92003241
=650  \0$aBisexuals$zUnited States.$0http://id.loc.gov/authorities/subjects/sh98006061
=650  \0$aFamilies$zUnited States.$0http://id.loc.gov/authorities/subjects/sh85047032
=650  \0$aGay fathers.$0http://id.loc.gov/authorities/subjects/sh90000760
=650  \0$aGay men$xLegal status, laws, etc.$zUnited States.
=650  \0$aGay parents.$0http://id.loc.gov/authorities/subjects/sh85061779
=650  \0$aGay rights$zUnited States.$0http://id.loc.gov/authorities/subjects/sh2008105072
=650  \0$aLesbian mothers.$0http://id.loc.gov/authorities/subjects/sh85076155
=650  \0$aTransgender people$zUnited States.$0http://id.loc.gov/authorities/subjects/sh2012000715
=650  \0$aTranssexuals$zUnited States.$0http://id.loc.gov/authorities/subjects/sh2003008858
=852  \\$aManuscripts and Archives,$bYale University Library,$eP.O. Box 208240, New Haven, CT  06520-8240.
=856  42$3View a description and listing of collection contents in the finding aid$uhttp://hdl.handle.net/10079/fa/mssa.ms.2000
=690  04$aLGBTQ resource.
</code></pre>
</div>
</div>
</section>
<section id="eliminando-subcampos-específicos" class="level2">
<h2 class="anchored" data-anchor-id="eliminando-subcampos-específicos">Eliminando subcampos específicos</h2>
<p>Eliminar subcampo <code>'d'</code> del campo <code>100</code>:</p>
<div id="e5a01f09" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pymarc <span class="im">import</span> MARCReader</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> copy <span class="im">import</span> deepcopy</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>my_marc_file <span class="op">=</span> <span class="st">"data/edited_69x_subject.mrc"</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(my_marc_file, <span class="st">'rb'</span>) <span class="im">as</span> data:</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    reader <span class="op">=</span> MARCReader(data)</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> record <span class="kw">in</span> reader:</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Verificar que el registro tenga campo `100` y subcampo `d`</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">len</span>(record.get_fields(<span class="st">"100"</span>)) <span class="op">&lt;</span> <span class="dv">1</span>:</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">try</span>:</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>            d<span class="op">=</span>record[<span class="st">"100"</span>][<span class="st">"d"</span>]</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">except</span> <span class="pp">KeyError</span>:</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Crear copia</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>        my_record <span class="op">=</span> deepcopy(record)</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Borrar subcampo</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> field <span class="kw">in</span> my_record.get_fields(<span class="st">'100'</span>):</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>            field.delete_subfield(<span class="st">'d'</span>)</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(record[<span class="st">"100"</span>])</span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(my_record[<span class="st">"100"</span>])</span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Salir despues del primer ejemplo</span></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>=100  1\$aGray, Dorothy$d1922-1976
=100  1\$aGray, Dorothy</code></pre>
</div>
</div>
</section>
<section id="añadiendo-un-nuevo-campo-a-un-registro" class="level2">
<h2 class="anchored" data-anchor-id="añadiendo-un-nuevo-campo-a-un-registro">Añadiendo un nuevo campo a un registro</h2>
<p>Veamos cómo podemos <strong>añadir un nuevo campo</strong> a un registro MARC.</p>
<p>Para hacerlo, necesitamos crear un <strong>objeto de campo</strong> (<code>Field</code>) usando PyMARC, y luego <strong>agregarlo al registro</strong>.</p>
<p>En PyMARC existen <strong>dos tipos de campos</strong>:</p>
<ul>
<li><strong>Campos de control</strong> (por ejemplo: <code>001</code>, <code>005</code>, <code>008</code>)<br>
</li>
<li><strong>Campos no controlados</strong> (todos los que incluyen indicadores y subcampos, como <code>100</code>, <code>245</code>, <code>650</code>)</li>
</ul>
<p>Podemos consultar la documentación de PyMARC para ver cómo se construye un objeto de tipo <code>Field</code>:</p>
<div id="076d899b" class="cell output" data-execution_count="7">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-overflow-scroll code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pymarc <span class="im">import</span> Field</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">help</span>(Field))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Help on class Field in module pymarc.field:

class Field(builtins.object)
 |  Field(tag: str, indicators: Optional[List[str]] = None, subfields: Optional[List[pymarc.field.Subfield]] = None, data: str = '')
 |
 |  Field() pass in the field tag, indicators and subfields for the tag.
 |
 |  .. code-block:: python
 |
 |      field = Field(
 |          tag = '245',
 |          indicators = ['0','1'],
 |          subfields = [
 |              Subfield(code='a', value='The pragmatic programmer : '),
 |              Subfield(code='b', value='from journeyman to master /'),
 |              Subfield(code='c', value='Andrew Hunt, David Thomas.'),
 |          ])
 |
 |  If you want to create a control field, don't pass in the indicators
 |  and use a data parameter rather than a subfields parameter:
 |
 |  .. code-block:: python
 |
 |      field = Field(tag='001', data='fol05731351')
 |
 |  Methods defined here:
 |
 |  __contains__(self, subfield: str) -&gt; bool
 |      Allows a shorthand test of field membership.
 |
 |      .. code-block:: python
 |
 |          'a' in field
 |
 |  __getitem__(self, code: str) -&gt; str
 |      Retrieve the first subfield with a given subfield code in a field.
 |
 |      Raises KeyError if `code` is not in the Field.
 |
 |      .. code-block:: python
 |
 |          field['a']
 |
 |  __init__(self, tag: str, indicators: Optional[List[str]] = None, subfields: Optional[List[pymarc.field.Subfield]] = None, data: str = '')
 |      Initialize a field `tag`.
 |
 |  __iter__(self)
 |
 |  __next__(self) -&gt; pymarc.field.Subfield
 |
 |  __setitem__(self, code: str, value: str) -&gt; None
 |      Set the values of the subfield code in a field.
 |
 |      .. code-block:: python
 |
 |          field['a'] = 'value'
 |
 |      Raises KeyError if there is more than one subfield code.
 |
 |  __str__(self) -&gt; str
 |      String representation of the field.
 |
 |      A Field object in a string context will return the tag, indicators
 |      and subfield as a string. This follows MARCMaker format; see [1]
 |      and [2] for further reference. Special character mnemonic strings
 |      have yet to be implemented (see [3]), so be forewarned. Note also
 |      for complete MARCMaker compatibility, you will need to change your
 |      newlines to DOS format ('CRLF').
 |
 |      [1] http://www.loc.gov/marc/makrbrkr.html#mechanics
 |      [2] http://search.cpan.org/~eijabb/MARC-File-MARCMaker/
 |      [3] http://www.loc.gov/marc/mnemonics.html
 |
 |  add_subfield(self, code: str, value: str, pos=None) -&gt; None
 |      Adds a subfield code/value to the end of a field or at a position (pos).
 |
 |      If pos is not supplied or out of range, the subfield will be added at the end.
 |
 |      .. code-block:: python
 |
 |          field.add_subfield('u', 'http://www.loc.gov')
 |          field.add_subfield('u', 'http://www.loc.gov', 0)
 |
 |  as_marc(self, encoding: str) -&gt; bytes
 |      Used during conversion of a field to raw marc.
 |
 |  as_marc21 = as_marc(self, encoding: str) -&gt; bytes
 |
 |  delete_subfield(self, code: str) -&gt; Optional[str]
 |      Deletes the first subfield with the specified 'code' and returns its value.
 |
 |      .. code-block:: python
 |
 |          value = field.delete_subfield('a')
 |
 |      If no subfield is found with the specified code None is returned.
 |
 |  format_field(self) -&gt; str
 |      Returns the field's subfields (or data in the case of control fields) as a string.
 |
 |      Like :func:`Field.value() &lt;pymarc.field.Field.value&gt;`, but prettier
 |      (adds spaces, formats subject headings).
 |
 |  get(self, code: str, default=None)
 |      A dict-like get method with a default value.
 |
 |      Implements a non-raising getter for a subfield code that will
 |      return the value of the first subfield whose code is `key`.
 |
 |  get_subfields(self, *codes) -&gt; List[str]
 |      Get subfields matching `codes`.
 |
 |      get_subfields() accepts one or more subfield codes and returns
 |      a list of subfield values.  The order of the subfield values
 |      in the list will be the order that they appear in the field.
 |
 |      .. code-block:: python
 |
 |          print(field.get_subfields('a'))
 |          print(field.get_subfields('a', 'b', 'z'))
 |
 |  is_control_field(self) -&gt; bool
 |      Returns true or false if the field is considered a control field.
 |
 |      Control fields lack indicators and subfields.
 |
 |  is_subject_field(self) -&gt; bool
 |      Returns True or False if the field is considered a subject field.
 |
 |      Used by :func:`format_field() &lt;pymarc.field.Field.format_field&gt;` .
 |
 |  linkage_occurrence_num(self) -&gt; Optional[str]
 |      Return the 'occurrence number' part of subfield 6, or None if not present.
 |
 |  subfields_as_dict(self) -&gt; Dict[str, List]
 |      Returns the subfields as a dictionary.
 |
 |      The dictionary is a mapping of subfield codes and values. Since
 |      subfield codes can repeat the values are a list.
 |
 |  value(self) -&gt; str
 |      Returns the field's subfields (or data in the case of control fields) as a string.
 |
 |  ----------------------------------------------------------------------
 |  Class methods defined here:
 |
 |  convert_legacy_subfields(subfields: List[str]) -&gt; List[pymarc.field.Subfield]
 |      Converts older-style subfield lists into Subfield lists.
 |
 |      Converts the old-style list of strings into a list of Subfields.
 |      As a class method this does not actually set any fields; it simply
 |      takes a list of strings and returns a list of Subfields.
 |
 |      .. code-block:: python
 |
 |          legacy_fields: list[str] = ['a', 'The pragmatic programmer : ',
 |                                      'b', 'from journeyman to master /',
 |                                      'c', 'Andrew Hunt, David Thomas']
 |
 |          coded_fields: list[Subfield] = Field.convert_legacy_subfields(legacy_fields)
 |
 |          myfield = Field(
 |              tag="245",
 |              indicators = ['0','1'],
 |              subfields=coded_fields
 |          )
 |
 |      :param subfields: A list of [code, value, code, value]
 |      :return: A list of Subfield named tuples
 |
 |  ----------------------------------------------------------------------
 |  Data descriptors defined here:
 |
 |  data
 |
 |  indicator1
 |      Indicator 1.
 |
 |  indicator2
 |      Indicator 2.
 |
 |  indicators
 |
 |  subfields
 |
 |  tag
 |
 |  ----------------------------------------------------------------------
 |  Data and other attributes defined here:
 |
 |  __slotnames__ = ['tag', 'data', 'indicators', 'subfields', '_Field__po...

None</code></pre>
</div>
</div>
<p><strong>Creamos un nuevo campo <code>245</code> con subcampos:</strong></p>
<div id="86be9adc" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pymarc <span class="im">import</span> MARCReader, Field, Subfield</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> copy <span class="im">import</span> deepcopy</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>my_marc_file <span class="op">=</span> <span class="st">"data/edited_69x_subject.mrc"</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(my_marc_file, <span class="st">'rb'</span>) <span class="im">as</span> data:</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    reader <span class="op">=</span> MARCReader(data)</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> record <span class="kw">in</span> reader:</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>        my_record <span class="op">=</span> deepcopy(record)</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>        nuevo_campo <span class="op">=</span> Field(</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>            tag<span class="op">=</span><span class="st">'245'</span>,</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>            indicators<span class="op">=</span>[<span class="st">'0'</span>, <span class="st">'1'</span>],</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>            subfields<span class="op">=</span>[</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>                Subfield(code<span class="op">=</span><span class="st">"a"</span>, value<span class="op">=</span><span class="st">'The pragmatic programmer : '</span>),</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>                Subfield(code<span class="op">=</span><span class="st">'b'</span>, value<span class="op">=</span><span class="st">'from journeyman to master /'</span>),</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>                Subfield(code<span class="op">=</span><span class="st">'c'</span>, value<span class="op">=</span><span class="st">'Andrew Hunt, David Thomas.'</span>)</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>            ]</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>        my_record.add_ordered_field(nuevo_campo)</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(my_record)</span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>=LDR  04800cpcaa2200505 a 4500
=001  12251425
=005  20240304103124.0
=008  140917i19772014ctu\\\\\\\\\\\\\\\\\eng\d
=035  \\$9(YUL)ead.mssa.ms.2000
=035  \\$a12251425
=040  \\$aCtY$beng$cCtY$edacs
=079  \\$a(OCoLC)1007214876
=090  \\$aMS 2000
=110  2\$aFamily Equality Council.$0http://id.loc.gov/authorities/names/no2012037822
=245  10$aUpdated Title$f1977-2014 (inclusive).
=245  01$aThe pragmatic programmer : $bfrom journeyman to master /$cAndrew Hunt, David Thomas.
=300  \\$a11 linear feet. (23 boxes)
=351  \\$aThe materials are arranged according to document type.
=506  \\$aThe materials are open for research with the exception of the  electronic files, which are closed until processed.
=520  \\$aThis collection consists of the records of Family Equality Council, a national advocacy organization for esbian, gay, bisexual, transgender, and queer (LGBTQ) parents, guardians, and allies. Materials in the collection consist of correspondence, annual and quarterly reports, articles and clippings, board of directors records, event records, financial and fundraising records, publications, subject files, and electronic files. The collection is particularly strong both for its documentation of the group's activism and advocacy efforts, as well as its efforts to provide community for and document the everyday lives and experiences of LGBTQ families.
=524  \\$aFamily Equality Council Records (MS 2000).  Manuscripts and Archives, Yale University Library.
=540  \\$aCopyright is retained by the creator(s) of this collection for materials they have authored or otherwise produced. After the lifetime of the creator(s) or until January 1, 2039 (date), whichever comes first, copyright passes to Yale University whether such works are at Yale or physically located elsewhere in the world. Copyright status for other collection materials is unknown. Additional information is provided in the finding aid.
=544  \\$aRelated material: Rainbow Families records (MS 2006).
=545  \\$aFamily Equality Council is a national advocacy organization dedicated to securing equal rights for lesbian, gay, bisexual, transgender, and queer (LGBTQ) parents, guardians, and allies. Family Equality Council has its origins in the Gay Fathers Coalition, an organization founded in 1979. In 1986, the Gay Fathers Coalition expanded to include lesbian mothers, prompting the group to rename itself the Gay and Lesbian Parents Coalition International (GLPCI). In 1998, GLPCI changed its name to the Family Pride Coalition in order to include bisexual and transgender parents among its members and constituents. In that same year, a group of youth who had been involved with Family Pride Coalition established a separate advocacy organization for the children of LGBTQ parents, Children of Lesbians and Gays Everywhere (COLAGE). In 2007, the Family Pride Coalition merged with Rainbow Families, and in that same year renamed itself again as Family Equality Council. Later, the group dropped Council from its name, becoming Family Equality in 2018.
=546  \\$aThe materials are in English.
=555  \\$aThe finding aid is available in the repository and on the Internet.
=561  \\$aThe materials were the gift of Family Equality Council, 2014.
=610  20$aCOLAGE.$0http://id.loc.gov/authorities/names/no2008088417
=610  20$aFamily Equality Council.$0http://id.loc.gov/authorities/names/no2012037822
=610  20$aFamily Pride Coalition.
=610  20$aGay and Lesbian Parents Coalition International.$0http://id.loc.gov/authorities/names/nr2002025214
=610  20$aGay Fathers Coalition.
=610  20$aRainbow Families.
=650  \0$aAdoptive parents.$0http://id.loc.gov/authorities/subjects/sh92003241
=650  \0$aBisexuals$zUnited States.$0http://id.loc.gov/authorities/subjects/sh98006061
=650  \0$aFamilies$zUnited States.$0http://id.loc.gov/authorities/subjects/sh85047032
=650  \0$aGay fathers.$0http://id.loc.gov/authorities/subjects/sh90000760
=650  \0$aGay men$xLegal status, laws, etc.$zUnited States.
=650  \0$aGay parents.$0http://id.loc.gov/authorities/subjects/sh85061779
=650  \0$aGay rights$zUnited States.$0http://id.loc.gov/authorities/subjects/sh2008105072
=650  \0$aLesbian mothers.$0http://id.loc.gov/authorities/subjects/sh85076155
=650  \0$aTransgender people$zUnited States.$0http://id.loc.gov/authorities/subjects/sh2012000715
=650  \0$aTranssexuals$zUnited States.$0http://id.loc.gov/authorities/subjects/sh2003008858
=852  \\$aManuscripts and Archives,$bYale University Library,$eP.O. Box 208240, New Haven, CT  06520-8240.
=856  42$3View a description and listing of collection contents in the finding aid$uhttp://hdl.handle.net/10079/fa/mssa.ms.2000
=690  04$aLGBTQ resource.
</code></pre>
</div>
</div>
<p>Usamos <code>add_ordered_field()</code> para insertar el campo en el lugar correcto.</p>
</section>
<section id="validación" class="level2">
<h2 class="anchored" data-anchor-id="validación">Validación</h2>
<p>PyMARC <strong>no valida</strong> si tu campo sigue el estándar MARC. Puedes crear campos no válidos, así que debes conocer las reglas del formato MARC. ¿Qué error introducimos al añadir un nuevo campo <code>245</code>?</p>
</section>
<section id="crear-un-registro-nuevo-desde-cero" class="level2">
<h2 class="anchored" data-anchor-id="crear-un-registro-nuevo-desde-cero">Crear un registro nuevo desde cero</h2>
<div id="48778995" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pymarc <span class="im">import</span> Record</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>nuevo_registro <span class="op">=</span> Record()</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(nuevo_registro)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>=LDR            22        4500
</code></pre>
</div>
</div>
<p>Contiene solo el campo obligatorio <code>LEADER</code>.</p>
<div class="callout callout-style-default callout-caution callout-titled" title="Ejercicio">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Ejercicio
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>Ejercicio: crea este registro</strong></p>
<table class="table">
<thead>
<tr class="header">
<th>Etiqueta</th>
<th>Ind1</th>
<th>Ind2</th>
<th>Subcampos</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>003</td>
<td></td>
<td></td>
<td>Nz</td>
</tr>
<tr class="even">
<td>100</td>
<td>1</td>
<td></td>
<td>a: Gattuso, Jay, d: d1978-</td>
</tr>
<tr class="odd">
<td>245</td>
<td>1</td>
<td>0</td>
<td>a: Goats…, b: What about cats!?</td>
</tr>
<tr class="even">
<td>650</td>
<td></td>
<td>0</td>
<td>a: Goats, b: Competitive…</td>
</tr>
<tr class="odd">
<td>650</td>
<td></td>
<td>0</td>
<td>a: Cats, b: Competitive…</td>
</tr>
</tbody>
</table>
<div id="1717cd7a" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pymarc <span class="im">import</span> Record, Field, Subfield</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>nuevo_registro <span class="op">=</span> Record()</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>campos <span class="op">=</span> [</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    Field(<span class="st">'003'</span>, data<span class="op">=</span><span class="st">'Nz'</span>),</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    Field(</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>        tag<span class="op">=</span><span class="st">'100'</span>, </span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>        indicators<span class="op">=</span>[<span class="st">'1'</span>,<span class="st">' '</span>], </span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>        subfields<span class="op">=</span>[</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>            Subfield(code<span class="op">=</span><span class="st">"a"</span>, value<span class="op">=</span><span class="st">"Gattuso, Jay,"</span>),</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>            Subfield(code<span class="op">=</span><span class="st">"d"</span>, value<span class="op">=</span><span class="st">"d1978-"</span>)</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>    Field(</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>        tag<span class="op">=</span><span class="st">'650'</span>, </span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>        indicators<span class="op">=</span>[<span class="st">' '</span>,<span class="st">'0'</span>], </span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>        subfields<span class="op">=</span>[</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>            Subfield(code<span class="op">=</span><span class="st">"a"</span>, value<span class="op">=</span><span class="st">"Goats"</span>),</span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>            Subfield(code<span class="op">=</span><span class="st">'b'</span>, value<span class="op">=</span><span class="st">'Competitive Pet Keeping'</span>)</span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>    Field(</span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>        tag<span class="op">=</span><span class="st">'650'</span>, </span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>        indicators<span class="op">=</span>[<span class="st">' '</span>,<span class="st">'0'</span>], </span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a>        subfields<span class="op">=</span>[</span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a>            Subfield(code<span class="op">=</span><span class="st">"a"</span>, value<span class="op">=</span><span class="st">"Cats"</span>),</span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a>            Subfield(code<span class="op">=</span><span class="st">'b'</span>, value<span class="op">=</span><span class="st">'Competitive Pet Keeping'</span>)</span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a>    Field(</span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a>        tag<span class="op">=</span><span class="st">'245'</span>, </span>
<span id="cb18-32"><a href="#cb18-32" aria-hidden="true" tabindex="-1"></a>        indicators<span class="op">=</span>[<span class="st">'1'</span>,<span class="st">'0'</span>], </span>
<span id="cb18-33"><a href="#cb18-33" aria-hidden="true" tabindex="-1"></a>        subfields<span class="op">=</span>[</span>
<span id="cb18-34"><a href="#cb18-34" aria-hidden="true" tabindex="-1"></a>            Subfield(code<span class="op">=</span><span class="st">"a"</span>, value<span class="op">=</span><span class="st">'Goats. Are they the best animals? :'</span>),</span>
<span id="cb18-35"><a href="#cb18-35" aria-hidden="true" tabindex="-1"></a>            Subfield(code<span class="op">=</span><span class="st">"b"</span>, value<span class="op">=</span><span class="st">'What about Cats!?'</span>)</span>
<span id="cb18-36"><a href="#cb18-36" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb18-37"><a href="#cb18-37" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb18-38"><a href="#cb18-38" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb18-39"><a href="#cb18-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-40"><a href="#cb18-40" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> campo <span class="kw">in</span> campos:</span>
<span id="cb18-41"><a href="#cb18-41" aria-hidden="true" tabindex="-1"></a>    nuevo_registro.add_ordered_field(campo)</span>
<span id="cb18-42"><a href="#cb18-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-43"><a href="#cb18-43" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(nuevo_registro)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>=LDR            22        4500
=003  Nz
=100  1\$aGattuso, Jay,$dd1978-
=245  10$aGoats. Are they the best animals? :$bWhat about Cats!?
=650  \0$aGoats$bCompetitive Pet Keeping
=650  \0$aCats$bCompetitive Pet Keeping
</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="importa-el-orden-de-los-campos" class="level2">
<h2 class="anchored" data-anchor-id="importa-el-orden-de-los-campos">¿Importa el orden de los campos?</h2>
<blockquote class="blockquote">
<p>No siempre. El estándar MARC solo exige que los campos de control (001-009) vayan al inicio. Pero muchas herramientas esperan ver los campos ordenados numéricamente, por lo tanto se recomienda usar <code>add_ordered_field()</code> en lugar de <code>add_field()</code>.</p>
</blockquote>
</section>
<section id="recursos" class="level2">
<h2 class="anchored" data-anchor-id="recursos">Recursos</h2>
<ul>
<li><a href="https://pymarc.readthedocs.io/">PyMARC docs</a></li>
<li><a href="https://www.loc.gov/marc/specifications/specrecstruc.html">Estructura MARC21</a></li>
</ul>
</section>
<section id="otros-ejemplos" class="level2">
<h2 class="anchored" data-anchor-id="otros-ejemplos">Otros ejemplos</h2>
<section id="consecuencias-no-deseadas" class="level3">
<h3 class="anchored" data-anchor-id="consecuencias-no-deseadas">Consecuencias no deseadas</h3>
<p>¿Cuál es el requisito implícito “oculto” en la tarea: <strong>“eliminar el campo 300 de nuestro registro”</strong>? ¿Qué impacto podría tener esto en nuestro proceso?</p>
<p>Podríamos estar <strong>asumiendo</strong> que solo hay <strong>un campo 300</strong> en el registro. Si asumimos eso y no lo verificamos, podríamos terminar <strong>eliminando más campos de los que esperábamos</strong>.</p>
<p><strong>Estrategias para evitar este problema</strong></p>
<p>Tenemos varias estrategias para manejar este tipo de situaciones:</p>
<ol type="1">
<li><p><strong>Consultar el estándar</strong>: Verifica si se permite uno o varios campos 300 en un registro MARC.</p>
<ul>
<li>Ojo: incluso si el estándar permite solo uno, podrías encontrar registros que <strong>no cumplen</strong> con él.</li>
</ul></li>
<li><p><strong>Revisar el corpus</strong>: Analiza el conjunto de datos con el que estás trabajando para ver si la práctica común es tener uno o varios campos.</p></li>
<li><p><strong>Agregar lógica al script</strong>: Usa condiciones para <strong>asegurarte</strong> de que solo eliminas el campo cuando efectivamente hay uno solo.</p></li>
</ol>
<p><strong>Implementación de la estrategia #3</strong></p>
<p>Aquí un ejemplo de cómo implementar la validación lógica en el código:</p>
<div id="ae280c1f" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pymarc <span class="im">import</span> MARCReader</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> copy <span class="im">import</span> deepcopy</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>my_marc_file <span class="op">=</span> <span class="st">"data/edited_69x_subject.mrc"</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(my_marc_file, <span class="st">'rb'</span>) <span class="im">as</span> data:</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    reader <span class="op">=</span> MARCReader(data)</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> record <span class="kw">in</span> reader:</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>        my_record <span class="op">=</span> deepcopy(record)</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Obtener lista de campos 300</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>        my_fields <span class="op">=</span> my_record.get_fields(<span class="st">'300'</span>)</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Verificar que haya solo uno</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">len</span>(my_fields) <span class="op">==</span> <span class="dv">1</span>:</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"Solo un campo 300 encontrado en el registro ID </span><span class="sc">{}</span><span class="st">. Eliminándolo."</span>.<span class="bu">format</span>(record[<span class="st">'001'</span>].value()))</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> my_field <span class="kw">in</span> my_fields:</span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>                my_record.remove_field(my_field)</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> <span class="bu">len</span>(my_fields) <span class="op">&gt;</span> <span class="dv">1</span>:</span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"Hay más de un campo 300 en el registro ID </span><span class="sc">{}</span><span class="st">. No se elimina nada."</span>.<span class="bu">format</span>(record[<span class="st">'001'</span>].value()))</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"No se halló el campo 300 en el registro ID </span><span class="sc">{}</span><span class="st">. No se elimina nada."</span>.<span class="bu">format</span>(record[<span class="st">'001'</span>].value()))</span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Comparación entre el registro original y el modificado</span></span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Campos 300 en el registro original:"</span>, <span class="bu">len</span>(record.get_fields(<span class="st">'300'</span>)))</span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Campos 300 en el registro modificado:"</span>, <span class="bu">len</span>(my_record.get_fields(<span class="st">'300'</span>)))</span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>()</span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Prueba con campo 035</span></span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-32"><a href="#cb20-32" aria-hidden="true" tabindex="-1"></a>        my_fields <span class="op">=</span> my_record.get_fields(<span class="st">'035'</span>)</span>
<span id="cb20-33"><a href="#cb20-33" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">len</span>(my_fields) <span class="op">==</span> <span class="dv">1</span>:</span>
<span id="cb20-34"><a href="#cb20-34" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"Solo un campo 035 encontrado en el registro ID </span><span class="sc">{}</span><span class="st">. Eliminándolo."</span>.<span class="bu">format</span>(record[<span class="st">'001'</span>].value()))</span>
<span id="cb20-35"><a href="#cb20-35" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> my_field <span class="kw">in</span> my_fields:</span>
<span id="cb20-36"><a href="#cb20-36" aria-hidden="true" tabindex="-1"></a>                my_record.remove_field(my_field)</span>
<span id="cb20-37"><a href="#cb20-37" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb20-38"><a href="#cb20-38" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"Hay más de un campo 035 en el registro ID </span><span class="sc">{}</span><span class="st">. No se elimina nada."</span>.<span class="bu">format</span>(record[<span class="st">'001'</span>].value()))</span>
<span id="cb20-39"><a href="#cb20-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-40"><a href="#cb20-40" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Campos 035 en el registro original:"</span>, <span class="bu">len</span>(record.get_fields(<span class="st">'035'</span>)))</span>
<span id="cb20-41"><a href="#cb20-41" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Campos 035 en el registro modificado:"</span>, <span class="bu">len</span>(my_record.get_fields(<span class="st">'035'</span>)))</span>
<span id="cb20-42"><a href="#cb20-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-43"><a href="#cb20-43" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Solo un campo 300 encontrado en el registro ID 12251425. Eliminándolo.
Campos 300 en el registro original: 1
Campos 300 en el registro modificado: 0

Hay más de un campo 035 en el registro ID 12251425. No se elimina nada.
Campos 035 en el registro original: 2
Campos 035 en el registro modificado: 2</code></pre>
</div>
</div>
<p><strong>Buenas prácticas</strong></p>
<ul>
<li><p>Nunca asumas que un campo aparece solo una vez sin validarlo.</p></li>
<li><p>Si el campo es obligatorio, asegúrate de que no lo eliminas accidentalmente sin reemplazarlo.</p></li>
<li><p>Imprime comparaciones antes y después para validar que el cambio tuvo el efecto esperado.</p></li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>